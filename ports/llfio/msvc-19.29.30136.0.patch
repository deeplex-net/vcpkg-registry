diff --git a/include/llfio/v2.0/map_handle.hpp b/include/llfio/v2.0/map_handle.hpp
index 89e616c..d5d61e9 100644
--- a/include/llfio/v2.0/map_handle.hpp
+++ b/include/llfio/v2.0/map_handle.hpp
@@ -939,7 +939,7 @@ namespace detail
   {
     try
     {
-      auto make_shared = [](map_handle h) {
+      auto make_shared = [](map_handle h) -> io_handle::registered_buffer_type {
         struct registered_buffer_type_indirect : io_multiplexer::_registered_buffer_type
         {
           map_handle h;
